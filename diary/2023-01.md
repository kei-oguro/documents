[2023](README.md#2023) [今月](2023-01.md)  
[2022](README.md#2022) [1月](2022-01.md) [2月](2022-02.md) [3月](2022-03.md) [4月](2022-04.md) [5月](2022-05.md) [6月](2022-06.md) [7月](2022-07.md) [8月](2022-08.md) [9月](2022-09.md) [10月](2022-10.md) [11月](2022-11.md) [12月](2022-12.md)  
[2021](README.md#2021) [2020](README.md#2020)  

2023年1月
=========

|Sun|Mon|Tue|Wen|Thu|Fri|Sat|
|---|---|---|---|---|---|---|
|[1](#0101-日)|[2](#0102-月)|[3](#0103-火)|[4](#0104-水)|[5](#0105-木)|[6](#0106-金)|[7](#0107-土)|
|[8](#0108-日)|[9](#0109-月)|[10](#0110-火)|[11](#0111-水)|[12](#0112-木)|[13](#0113-金)|[14](#0114-土)|
|[15](#0115-日)|[16](#0116-月)|[17](#0117-火)|[18](#0118-水)|[19](#0119-木)|[20](#0120-金)|[21](#0121-土)|
|[22](#0122-日)|[23](#0123-月)|[24](#0124-火)|[25](#0125-水)|[26](#0126-木)|[27](#0127-金)|[28](#0128-土)|
|[29](#0129-日)|[30](#0130-月)|[31](#0131-火)|[1](2023-02.md#0201-水)|[2](2023-02.md#0202-木)|[3](2023-02.md#0203-金)|[4](2023-02.md#0204-土)|

## 01/06 金

- 目覚ましを掛け忘れて9:20に何かの通知で起床。飲み過ぎ。
- __コーヒー__ をプレスで淹れた。
- __園芸__
  - 水やりは室内の鉢だけ。
  - <img src='images/%E5%86%99%E7%9C%9F%202023%2D01%2D06%209%2047%2046.jpg' alt='写真 2023-01-06 9 47 46.jpg' width='30%'> __生姜__ に新しいコブが出来ているし、新しい芽が伸びている。
    - [植え付けた時の写真](2022-06.md#0807-ginger-and-green-onion) を見ると、新しい芽も新しいコブから出ていることが分かる。
      - その時の写真の __九条ネギ__ はまあまあ元気だが、もう片方のハイドロボールの生姜は枯れている。
      - __茗荷__も枯れているんだけど、もうダメなのかな？
- モーリーロバートソンという人が「 __知的な体力__ 」という言葉遣いをしてて、僕と同じ使い方をしてた。
  - 大学院を出た知り合いがいて、頭の回転が早いんだけど、結論を急ぐせいで十分な結果を得られない傾向がある。本人には伝えてないが、彼を言い表す用途でひねり出した。
  - 心理学的に人間は「何にでも説明をつけて納得したがる」という傾向があるらしい。
    - 結論が出たと思っても、「現時点ではここまでしかたどり着いていない」と考えるのが良いと思ってる。
    - また、何かの情報を得た時に「その情報源がこういう情報を出した、までが事実で、真偽については保留する」態度が大切だと思う。
    - そういう態度が知的誠実さであり知的体力のある態度だ。
- __FX__
  - 3月くらいまでは米ドル一人勝ちだと思ってたんだけどな。
  - 年末最終日12/30に円が下がった分は戻した。アレは休暇前に円転したということだったんだろう。
    - 余力があれば買い増したいところだ。それなりに円高になるんだろうけど、何年も持つつもりなら、平均取得額を下げればスワップで十分に貯金よりもマシになるだろう。
  - ポンドは下がると思ってた。強制ロスカットまでのマージンを稼ぐために処分したが、余裕があれば保持しておきたかった。まあ、そういうものだ。
  - 手元資金もないし取引余力が増える気配もないから、今年の市場がどうなるかの予想に興味が持てない。
- __ランチ__ は新宿中央公園の通りを挟んだところの `MORETHAN` で __ビュッフェ__ 。
  - どれも美味しかったけど、お代わりしたいのはカルパッチョだけ。糖質を気にしなければパンも美味しかった。
  - ブロッコリーの和え物だと思っていたのがハード系のパンで驚いた。
  - レシートを見たらホリデーランチだって。
  - 帰りに併設のパン屋さんで __コーヒーをテイクアウト__ 。
  - 野菜が目的なら `シズラー` の方がいいかな。皿も大きいし。
- 賞味期限切れのヴァンホーテンの __ココア__ を飲む。
  - 牛乳が無いのでお湯で溶いた。ココナッツミルクはあるけど、。
  - 何で __牛乳の買い置き__ を止めたんだっけ？ダイエットで走るんだし、たんぱく源としてもカルシウム源としても、あった方が良いのでは？
- 「完全修飾名」を `fully qualified name` と訳すDeepLは凄い。後は「拡張クラス」を `extension class` にしてくれればC#マスター。
- 「活用」の英語は `conjugation` 。
  - [こないだ調べた](2022-12.md#1227-conjugation-of-snapshot) けど覚えられなかった。
  - これで次回は「活用」で検索できる。
- [`MathExtension` という GitHub プロジェクト](https://github.com/aj-r/MathExtension/blob/master/MathExtension/MathEx.cs)を見てたら `Rational` を使っていて「そんなのあるの！」と驚いたが、 `System` と `System.Numerics` に無かった。自前のだった。
  - 他にはこんなのがあった。
    - [struct Microsoft.SolverFoundation.Common.Rational](https://learn.microsoft.com/en-us/previous-versions/visualstudio/ff526610(v=vs.93))
    - [GitHub System.Numerics.BigRational and System.Numerics.MathR](https://github.com/dotnet/runtime/issues/71791)
- <details><summary>__浮動小数点数の比較__ で許容したい誤差epsilonを渡すことがあるが、その値の決め方は対象の大きさによって変えるべきだが、考慮しているのを見たことが無い。</summary>

  - 例えば1bitだけ許容したい場合、対象の数字の $x*2^{-23}$ (2のマイナス23乗を掛けたもの)を渡せばよい。
  - 例えばこうだ。
    ```cs
    public static bool NearlyEquals(float a, float b, int epsilonBits)
    {
      var (smaller, bigger) = MathF.Abs(a) < MathF.Abs(b) ? (a, b) : (b, a);
      var epsilon = MathF.Abs(bigger) / (1 << epsilonBits);
      return bigger + epsilon >= smaller && bigger - epsilon <= smaller;
    }
    ```
  - また、誤差の指定が適当で良いならこう書ける。許容誤差が最大で倍になる。
    ```cs
    public static bool NearlyEquals(float a, float b, int epsilonBits)
    {
      var epsilon = MathF.Max(MathF.Abs(a), MathF.Abs(b)) / (1 << epsilonBits);
      return MathF.Abs(a - b) < epsilon;
    }
    ```
  - 例えば現実のスケールで0.1mmというのを渡したい場合があるならこうしてもいい。名前を別にした方がいいかな。named parameterでの運用でもいいと思う。
    ```cs
    public static bool NearlyEquals(float a, float b, float epsilon) => MathF.Abs(a - b) < epsilon;
    public static bool NearlyEquals(float a, float b, int epsilonBits)
    {
      var epsilon = MathF.Max(MathF.Abs(a), MathF.Abs(b)) / (1 << epsilonBits);
      return NearlyEqualsTo(a, b, epsilon);
    }
    ```
  - `log2()` や `exp2()` がFPU上で高速に実行できるということだと、ビット指定の場合の誤差を安いコストで消せるんだけど、どうなんだろう。
    - 整数でビット演算込みで処理するのもアリと言えばアリだが。ハードウェ的には仮数部をゼロにするだけなんだよね。
      - で、指数を適当に小さくする。23小さくしたら誤差1ビット。このパートは整数よりもFPUでやった方が余計な処理が減ってむしろいいかも。
    - ハードウェア的には `floor(log2(x))` はかなり安く作れるはずだ。 `exp2(floor(x))` も。必要なのはコレなんだよな。
  - C#には `Log2()` があっても `Exp2()` がない。
    - `epsilon = MathF.Exp2((MathF.Floor(MathF.Log2(x) - 24 + epsilonBits)));` なんだけどね。
  - `NFloat` なんてのがあるのか。それにはexp2もある。
    - https://learn.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.nfloat?view=net-7.0

  </details>

- C#で `Vector3.TryParse()` のようにstatic methodを追加することはできないと思う。
  - 同じ流儀に出来ないのは残念だね。
  - `string.ParseVector3(str)` とか？
- C#の`Array`がGeneric型じゃないという質問についてのベストアンサーが素晴らしい。
  - https://stackoverflow.com/questions/14324987/why-isnt-array-a-generic-type

  - <details><summary>実装してるinterfaceについて試してみた。</summary>

    - https://gist.github.com/kei-oguro/894258a1858b7c846ba6ca5b052625d8

      ```
      ICloneable
      IList
      ICollection
      IEnumerable
      IStructuralComparable
      IStructuralEquatable
      IList<Int32>
      ICollection<Int32>
      IEnumerable<Int32>
      IReadOnlyList<Int32>
      IReadOnlyCollection<Int32>
      ```

  </details>

- 「 __虚実皮膜__ 」という言葉があるらしい。皮膜は「ひにく」と読むという。
  - 演技の精髄は、虚と実の間、虚でもなく、実でもないところにある、という意味だそうだ。
  - 皮膜は皮と肉の間を指すのでひにくと読むのだそうだ。
    - つまり __皮下脂肪__ のことか。
- __核融合__ のために1億°Cにして、結局 __ボイラーで発電__ するんでしょ？お湯を沸かすために1億°Cにするってクラクラする。
  - そこから安全に熱を取り出せるのだろうか。
    - 火力発電は600°Cらしい。ボイラーの材料にもよるだろうけど、いくつも桁を下げる必要がある。高くても2000°C程度ではないか。
    - 現段階で実在する熱交換器に投入するなら、その時点でその程度の温度に下げておかなくてはならない。
    - 超低圧の気体で熱交換するとか？
  - 効率も高くないと廃熱が大変になるかも知れない。
  - どうなんだろう。
- `Slay the Spire` で3キャラ目でラスボスまで行った。

## 01/05 木

- 7:00の目覚ましで9:10起床。飲み過ぎ。
- __コーヒー__ をプレスで淹れた。
- __園芸__
  - 水やりはペットボトル2.5本。
  - 奥の __ライムの木__ のカイガラムシ掃除。数は少ないが大きいのがいる。
- 仕事始め。
- 貸与PCを繋いでいる自宅のモニタが、しばらく音が鳴らないとスリープ的な状況になるようだ。
  - それで、通知音が聞こえない。
  - 前の取引先の貸与デスクトップPCではそんなことはなかったんだけど。
  - PCの問題なのか、ウチのモニタの問題なのか。
- 昨日行きたかったお店にランチに行くつもりだったが調べもので遅くなって、UberEatsで注文したら届くのはお昼休みが終わってから。
  - 20%割引券をくれるというが、今回割引して欲しい。
  - 待ってる間にスタバへ何か買いに行こうかと思ったが、モバイルオーダーのメニューを見ていると欲しいものが無くなる。どこかへ行った帰りじゃないと。
  - お昼を完全に抜くと夕方にお腹が空く。キャベツの千切りでも買ってきたら良かった。
- 素麺の在庫があることに気付いた。
- __ランチ__ は10種類ナムルのビビンバ。
- 足りない。どうしようかと困っていたが、結局買い置きのコンビニの冷凍総菜を食べた。
- C#の `using static` は `using static Math = System.Math;` のような使い方しか知らなかったが、 `using static System.Math` だけで、クラス名無しでアクセスできるようになるのか。C#6.0かららしい。
  - static メソッドを呼ぶ時にクラス名をイチイチ書く仕様が気に入らなかったが直っていた。
- Microsoftはこういうが、 `namespace Microsoft.Extensions.Primitives { public static class Extensions {} }`という名前空間とクラスを定義している。
  - `❌ AVOID generic naming of namespaces dedicated to extension methods (e.g., "Extensions"). Use a descriptive name (e.g., "Routing") instead.`

## 01/04 水

- __コーヒー__ をプレスで淹れた。今日から `ノーブルコーヒー` のゴールデンブレンド。
    - ミルに豆の量を量らずに入れてしまってかなり多めになった。

- <details><summary>fromclip/toclipのメンテ。</summary>

  - MultiByteToMultiByte()が欲しい。
  - 何でコードページ対応が必要かって、Windowsネイティブのプログラムと、Git bashで動かすプログラムの共存のため。
  - mingw(Git bash環境)ではwchar_tを使ってない
  - mingwのコードページを調べたら437だった。 `GetACP()` は932。
    ```
    LOCALE_ILANGUAGE: 0409
    LOCALE_IDEFAULTCODEPAGE: 437
    LOCALE_ICOUNTRY: 1
    ```
    [ソースコード(Gist)](https://gist.github.com/kei-oguro/a79eac64c5c1bd2c3d266e77200ae1d7)
  </details>

  - `GlobalReAlloc()` が動かない。
    - Alloc と引数の並びが逆だとはね。
  - <details><summary>C++のデフォルトコンストラクト禁止とかコピー禁止とかの `= delete` を初めて使ってみた。</summary>

    - もともとそれらをprivateで宣言だけして定義しないようにしてた。
    - 正直、クラス名を何度もコピペする必要があるので、もっと簡素にして欲しい。手数がほとんど変わってないし、自分のクラス名を何度も書く必要はないのではないか。
    - が、元の僕の書き方は、知らない人には何のことか分からなかったし、検索の仕方も分からない見た目だったのが、知らなくても推測が付くし、検索もしやすい見た目になったのは良いことだと思う。
  </details>

  - 文字コード変換がゴールなのに、ソース整理して終わった。
- 日記のスペルチェックにpythonやwin32apiの辞書を追加してなかった。
  - どこで設定するのか調べるのが面倒だったから。wchar_tのために今設定した。
- 家にいるのに不在だと言われて見たら怪しいURLで、不在票も入ってなかった。
- ランチは少し時間のかかるようなお店に行こうと思っていたが、プログラムしてる間に遅くなった。主に引数の並びのせいだ。
- それでは晩酌は高田馬場に行こうといたが `Slay the Spire` やってるうちに19:00になって、行動予定と齟齬が出た。
- 買い置きのクラフトビール飲みながら、趣味のプログラムしたり、ゲームしたりしてたのだから、有意義な休日だったといえるのではないか。
- 十分に時間もあったし元気だったのに、水やりを忘れた。
- __夕食__ は [12/30のサンバル的なスープ](2022-12.md#1230-sambar) に貰った餅を入れたもの。
- 酒を飲みに __お出掛け__ 。
  - 寒いので近所でカフェラテをテイクアウトして飲みながら移動。
  - 今日から営業の __東中野__ のビアバーで一杯。
  - あと2軒ハシゴ。両方とも事前の希望よりも深酒した。

## 01/03 火

- スマホを充電するのを忘れてた。
- 日吉で中学の友達と麻雀。
  - 半荘5回で最初と最後だけトップ、後の3回はラスト。それでもトータル勝ち頭。
    - 年越しの酒が残っていて、手は震えそうになるし、受け入れ枚数を数えるのも面倒になる。
    - 今日はやたらとカンチャンを引く日だった。
  - 行きの移動中に `ノーブルコーヒー` で __コーヒーをテイクアウト__ 。ついでに豆も買う。
  - 終わってからその辺の居酒屋で __会食__ 。

## 01/02 月

- 水やりはペットボトル1本ちょっと。
- `Slay the Spire` で、昨日まで頑張ってたのとは別のキャラでクリアした。あと2キャラ頑張るかどうか。
- 夕方から家族で __会食__ 。
  - 居酒屋で飲んだ後に、妹一家の部屋で宅飲み。近所の酒屋で適当なワインとチーズを買っていく。
- 近所の中華で、半ラーメン的なものか、小鍋みたいなのを作って貰おうと思ったが、混んでて気が引けた。
- コンビニで総菜とカップ麺を買って帰って家で食べた。

## 01/01 日 元日

- __コーヒー__ をプレスで淹れた。丁度豆を使い切った。
- __FX__ はかなりやられたと思っていたが、去年の正月も大差ない残高だった。利確して引き出したんだから、一応勝ってるかも知れない。
- 良く晴れてる。
- __園芸__
  - 水やりはペットボトル3.5本。
  - 本棚の上段が35°C。
  - 葉が落ちた __梅__ の __豊後__ が水を良く吸ってる気がする。花を咲かせる準備かも知れない。
    - 他の2本が水を吸ってないということは、ダメな証拠かも知れない。
- 昼から `UCHU` の缶ビールを飲む。
- `Slay the Spire` 。
- __晩酌__ しに __お出掛け__ 。
  - 眼鏡を忘れて出掛けてしまった。何とかなるもんだ。
  - 近所のもつ焼き屋の新中野店のLINEに反応したので行くつもりだったけど、昨日沢山食べてお腹が一杯だったのでやめた。気温もマイルドだったし、散歩に丁度良いと思ったんだけど。
  - Instagram正月やっていることを知っていた近所の2軒に顔を出して __晩酌__ してきた。
- 別にお腹が空いてないのに __夜食__ を食べた。唐揚げとサラダと豆腐とポテチ。
  - コンビニで買ったサラダに、酔っててドレッシングが入ってないと思っていたが、入っていた。半分以上食べてから気付いて、豆腐を足してドレッシングを使った。

<!-- cspell:words Alloc LOCALE_ILANGUAGE LOCALE_IDEFAULTCODEPAGE LOCALE_ICOUNTRY -->
